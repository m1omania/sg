# SolarGroup Investment Platform

Платформа для управления инвестициями с системой купонов и промокодов.

## Описание

Это полнофункциональный прототип инвестиционной платформы с возможностью:
- Регистрация пользователей с подтверждением через Email/SMS
- Управления купонами и промокодами
- Пополнение счета различными способами (карта, криптовалюта)
- Инвестирование в различные проекты
- Отслеживания истории инвестиций
- Управления кошельком

## Архитектура

### Фронтенд
- HTML5
- CSS3 (с использованием CSS-переменных)
- Vanilla JavaScript (ES6+)

### Бэкенд
- Node.js с Express.js
- Better SQLite3 для хранения данных
- RESTful API

### Структура проекта
```
.
├── index.html          # Главная страница (Dashboard)
├── coupons.html        # Страница купонов и промокодов
├── wallet.html         # Страница кошелька
├── invest.html         # Страница инвестиций
├── register.html       # Страница регистрации
├── deposit.html        # Страница пополнения счета
├── projects.html       # Страница проектов
├── my-investments.html # Страница "Мои инвестиции"
├── style.css           # Стили
├── app.js              # Клиентский JavaScript
├── server/             # Серверная часть
│   ├── server.js       # Основной серверный файл
│   ├── package.json    # Зависимости сервера
│   ├── config/         # Конфигурационные файлы
│   ├── routes/         # Маршруты API
│   ├── controllers/    # Контроллеры
│   └── models/         # Модели данных
├── render.yaml         # Конфигурация для Render
└── .gitignore          # Файл игнорирования для Git
```

## Локальный запуск

1. Установите зависимости сервера:
```bash
cd server
npm install
```

2. Запустите сервер:
```bash
npm start
```

3. Откройте в браузере:
```
http://localhost:3000
```

## Развертывание на Render

1. Создайте аккаунт на [Render](https://render.com/)
2. Создайте новый репозиторий на GitHub и загрузите туда проект
3. Подключите ваш репозиторий к Render:
   - Перейдите в Dashboard на Render
   - Нажмите "New Web Service"
   - Выберите ваш репозиторий GitHub
4. Укажите следующие настройки:
   - Name: solar-group-app (или любое другое)
   - Environment: Node
   - Build Command: `cd server && npm install`
   - Start Command: `cd server && node server.js`
   - Instance Type: Free (для тестирования)
5. Добавьте переменную окружения:
   - NODE_ENV = production
6. Нажмите "Create Web Service"
7. Дождитесь завершения развертывания

Также можно использовать файл [render.yaml](file:///Users/andreyreutskiy/projects/sg/render.yaml) для автоматической конфигурации:
1. Подключите репозиторий к Render
2. Render автоматически обнаружит [render.yaml](file:///Users/andreyreutskiy/projects/sg/render.yaml) и применит настройки

## Основные функции

### Регистрация пользователей
- Полная регистрация с валидацией данных
- Подтверждение через Email и SMS
- Приветственный купон ($25) после регистрации

### Пополнение счета
- Поддержка банковских карт и криптовалюты
- Мгновенное зачисление средств
- Отображение в балансе кошелька

### Инвестиционные проекты
- Каталог проектов с фильтрами и сортировкой
- Детальная информация о каждом проекте
- Возможность инвестировать в проекты

### Мои инвестиции
- История всех инвестиций
- Статусы инвестиций (активные, завершенные)
- Подробная информация о каждой инвестиции

### Купоны и промокоды
- Система купонов и промокодов
- Возможность активации промокодов
- Использование купонов при инвестициях

## API Endpoints

### Аутентификация
- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Вход пользователя
- `POST /api/auth/verify-email` - Подтверждение email
- `POST /api/auth/verify-phone` - Подтверждение телефона

### Купоны
- `GET /api/coupons/active` - Получить активные купоны
- `GET /api/coupons/history` - Получить историю купонов
- `POST /api/coupons/use` - Использовать купон
- `POST /api/coupons/activate` - Активировать промокод

### Инвестиции
- `POST /api/investments/create` - Создать инвестицию
- `GET /api/investments/:userId` - Получить инвестиции пользователя

### Кошелек
- `GET /api/wallet/:userId` - Получить информацию о кошельке
- `GET /api/wallet/:userId/coupons` - Получить купоны пользователя
- `POST /api/wallet/:userId/deposit` - Пополнить баланс

### Проекты
- `GET /api/projects` - Получить все активные проекты
- `GET /api/projects/:id` - Получить проект по ID
- `GET /api/projects/search/:query` - Поиск проектов

### Транзакции
- `POST /api/transactions/deposit` - Пополнить счет
- `GET /api/transactions/:userId` - Получить историю транзакций

### Пользователи
- `GET /api/users/:userId` - Получить информацию о пользователе
- `GET /api/users/:userId/stats` - Получить статистику пользователя

## База данных

Проект использует Better SQLite3 для хранения данных. При первом запуске автоматически создаются таблицы и добавляются тестовые данные.

### Таблицы:
- `users` - Пользователи
- `coupons` - Купоны и промокоды
- `coupon_history` - История использования купонов
- `investments` - Инвестиции
- `wallets` - Кошельки пользователей
- `transactions` - История транзакций
- `projects` - Инвестиционные проекты
- `notifications` - Уведомления пользователей

## Демо данные

В системе предустановлены тестовые данные:
- Пользователь: Константин (email: konstantin@example.com, пароль: demo_password_hash)
- Купоны: несколько тестовых купонов с разными условиями
- Проекты: 3 инвестиционных проекта
- Баланс кошелька: $1000.00 (основной) + $25.00 (бонусный)

## Разработка

Для разработки рекомендуется использовать nodemon:
```bash
cd server
npm run dev
```

Это позволит автоматически перезапускать сервер при изменении файлов.

## Устранение неполадок

Если вы получаете ошибку "Repository not found", убедитесь, что:
1. Вы создали репозиторий на GitHub
2. Загрузили в него все файлы проекта
3. Подключили правильный репозиторий к Render

Если развертывание не удается, проверьте:
1. Логи развертывания на Render
2. Правильность команд сборки и запуска в настройках Render
3. Наличие файла [render.yaml](file:///Users/andreyreutskiy/projects/sg/render.yaml) в корне репозитория

Если вы получаете ошибку `invalid ELF header`, это означает проблему с нативными модулями. Мы используем `better-sqlite3`, который более стабильно работает на разных платформах, включая Render.