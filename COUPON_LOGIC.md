# üé´ –õ–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—É–ø–æ–Ω–æ–≤

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –∫—É–ø–æ–Ω–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å–∫–∏–¥–∫–∏ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤. –ö—É–ø–æ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º –∏–ª–∏ –±—ã—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏.

## üîÑ –õ–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—É–ø–æ–Ω–æ–≤

### 1. –¢–∏–ø—ã –∫—É–ø–æ–Ω–æ–≤

#### **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã**
- **–ü—Ä–æ–µ–∫—Ç**: `'–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã'`
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: –∫–æ –≤—Å–µ–º –ø–∞–∫–µ—Ç–∞–º
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/invest.html`
- **–ü—Ä–∏–º–µ—Ä**: `WELCOME25` - $25 —Å–∫–∏–¥–∫–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### **–ü—Ä–æ–µ–∫—Ç–Ω—ã–µ –∫—É–ø–æ–Ω—ã**
- **–ü—Ä–æ–µ–∫—Ç**: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `'–î–∏—Ä–∏–∂–∞–±–ª–∏'`, `'–°–æ–≤—ç–ª–º–∞—à'`)
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: —Ç–æ–ª—å–∫–æ –∫ –ø–∞–∫–µ—Ç–∞–º —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/packages.html?project=...`
- **–ü—Ä–∏–º–µ—Ä**: `INVEST50` - $50 —Å–∫–∏–¥–∫–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ "–î–∏—Ä–∏–∂–∞–±–ª–∏"

### 2. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫—É–ø–æ–Ω–∞

#### **–°–æ–∑–¥–∞–Ω–∏–µ**
```javascript
// –ö—É–ø–æ–Ω —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª—è–º–∏:
{
    used: false,
    created_at: '2025-01-01T00:00:00.000Z',
    expires_at: '2025-12-31T23:59:59.000Z'
}
```

#### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**
```javascript
// –ö—É–ø–æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö, –µ—Å–ª–∏:
// - used: false
// - expires_at > current_date
// - project_name —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–µ–∫—É—â–µ–º—É –ø—Ä–æ–µ–∫—Ç—É –∏–ª–∏ '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã'
```

#### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–Ω–∞–≤–∏–≥–∞—Ü–∏—è)**
```javascript
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å" –≤ –∫–æ—à–µ–ª—å–∫–µ:

// –î–ª—è –∫—É–ø–æ–Ω–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤:
// 1. –ö—É–ø–æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ sessionStorage
// 2. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
// 3. –ö—É–ø–æ–Ω –ù–ï –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π

// –î–ª—è –∫—É–ø–æ–Ω–æ–≤ "–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã":
// 1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
// 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç (–î–∏—Ä–∏–∂–∞–±–ª–∏ –∏–ª–∏ –°–æ–≤—ç–ª–º–∞—à)
// 3. –ö—É–ø–æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ sessionStorage
// 4. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–∞–∫–µ—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
// 5. –ö—É–ø–æ–Ω –ù–ï –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π
```

#### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ)**
```javascript
// –ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞:
// 1. used: true (–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –∫—É–ø–æ–Ω–µ)
// 2. updated_at: current_timestamp
// 3. –°–æ–∑–¥–∞–µ—Ç—Å—è –ö–û–ü–ò–Ø –∫—É–ø–æ–Ω–∞ –≤ used_coupons —Å used: true
// 4. –ö—É–ø–æ–Ω –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö
// 5. –í –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–ø–∏—è —Å –æ–≤–µ—Ä–ª–µ–µ–º "–ò–°–ü–û–õ–¨–ó–û–í–ê–ù"
```

#### **–ò—Å—Ç–µ—á–µ–Ω–∏–µ —Å—Ä–æ–∫–∞**
```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ:
// 1. expires_at < current_timestamp
// 2. status: 'expired'
// 3. –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é
// 4. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –æ–≤–µ—Ä–ª–µ–µ–º "–ò–°–¢–Å–ö"
```

#### **–û—Ç–∑—ã–≤ –∫—É–ø–æ–Ω–∞**
```javascript
// –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º:
// 1. status: 'revoked'
// 2. –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é
// 3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –æ–≤–µ—Ä–ª–µ–µ–º "–û–¢–û–ó–í–ê–ù"
```

#### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤**
```javascript
// –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã:
// 1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∫—É–ø–æ–Ω–æ–≤ —Å ID 4 –∏ 5
// 2. –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ used_coupons
// 3. –ö—É–ø–æ–Ω 4: status: 'expired' (–∏—Å—Ç–µ–∫—à–∏–π)
// 4. –ö—É–ø–æ–Ω 5: status: 'revoked' (–æ—Ç–æ–∑–≤–∞–Ω–Ω—ã–π)
// 5. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ

// –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è:
const hasExpiredCoupon = this.data.used_coupons.some(c => c.id === 4);
const hasRevokedCoupon = this.data.used_coupons.some(c => c.id === 5);

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏:
if (!hasExpiredCoupon) { /* –¥–æ–±–∞–≤–ª—è–µ–º –∏—Å—Ç–µ–∫—à–∏–π */ }
if (!hasRevokedCoupon) { /* –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã–π */ }

// –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
// - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ ID –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
// - –ö—É–ø–æ–Ω—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
// - –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage
// - –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫—É–ø–æ–Ω—ã –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è
```

#### **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∫—É–ø–æ–Ω–æ–≤**
```javascript
// –ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω:
{
    status: 'expired',
    used: false,
    expires_at: '2024-12-31T23:59:59.000Z' // –ü—Ä–æ—à–ª–∞—è –¥–∞—Ç–∞
}

// –û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω:
{
    status: 'revoked',
    used: false,
    expires_at: '2025-06-30T23:59:59.000Z' // –ë—É–¥—É—â–∞—è –¥–∞—Ç–∞
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω:
{
    used: true,
    status: undefined // –∏–ª–∏ 'used'
}
```

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–∫—É–ø–∫–∞ –ø–∞–∫–µ—Ç–∞ —Å –∫—É–ø–æ–Ω–∞–º–∏**

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è** (`checkout.html`)
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–µ –∫—É–ø–æ–Ω—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –∫—É–ø–æ–Ω
   - –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –Ω–æ–≤–æ–≥–æ –∫—É–ø–æ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å–∫–∏–¥–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

2. **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞**
   - –í—ã–±—Ä–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `used: true`
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –æ–± –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç**
   - –ö—É–ø–æ–Ω –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö
   - –ü–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–ø–æ–Ω–∞ —Å –∫–æ—à–µ–ª—å–∫–∞**

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—à–µ–ª—å–∫–∞** (`wallet.html`)
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–µ –∫—É–ø–æ–Ω—ã
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"

2. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**
   - –ö—É–ø–æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `sessionStorage`
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –ö—É–ø–æ–Ω –ù–ï –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π

3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–∞–∫–µ—Ç–æ–≤** (`packages.html`)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞–∫–µ—Ç
   - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

4. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è** (`checkout.html`)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `sessionStorage` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞
   - –ï—Å–ª–∏ –∫—É–ø–æ–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–µ–Ω - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
   - `sessionStorage` –æ—á–∏—â–∞–µ—Ç—Å—è

5. **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞**
   - –ö—É–ø–æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `used: true`

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–ø–æ–Ω–∞ "–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã" —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º**

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—à–µ–ª—å–∫–∞/–∫—É–ø–æ–Ω–æ–≤** (`wallet.html` –∏–ª–∏ `coupons.html`)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫—É–ø–æ–Ω —Å `project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã'`
   - –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"

2. **–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–≤—É–º—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏
   - –î–∏—Ä–∏–∂–∞–±–ª–∏ üöÅ - –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ –ª–µ—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –∞–ø–ø–∞—Ä–∞—Ç—ã
   - –°–æ–≤—ç–ª–º–∞—à üè≠ - –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π –ø—Ä–æ–µ–∫—Ç

3. **–ù–∞–≤–∏–≥–∞—Ü–∏—è**
   - –ö—É–ø–æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `sessionStorage`
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–∞–∫–µ—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
   - –ö—É–ø–æ–Ω –ù–ï –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π

4. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–∞–∫–µ—Ç–æ–≤** (`packages.html`)
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–∞–∫–µ—Ç –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
   - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

5. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è** (`checkout.html`)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `sessionStorage` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞
   - –ï—Å–ª–∏ –∫—É–ø–æ–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–µ–Ω - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
   - `sessionStorage` –æ—á–∏—â–∞–µ—Ç—Å—è

6. **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞**
   - –ö—É–ø–æ–Ω –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `used: true`

### **–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∫—É–ø–æ–Ω–æ–≤**

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É–ø–æ–Ω–æ–≤** (`coupons.html`)
   - –ö–ª–∏–∫ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ò—Å—Ç–æ—Ä–∏—è"
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ, –∏—Å—Ç–µ–∫—à–∏–µ –∏ –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ –∫—É–ø–æ–Ω—ã
   - –°—Ç–∞—Ç—É—Å—ã: "–ò–°–ü–û–õ–¨–ó–û–í–ê–ù", "–ò–°–¢–Å–ö", "–û–¢–û–ó–í–ê–ù"
   - –ö–Ω–æ–ø–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã –¥–ª—è –≤—Å–µ—Ö –∫—É–ø–æ–Ω–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏

2. **–¢–∏–ø—ã –∫—É–ø–æ–Ω–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏**
   - **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ**: `used: true` - –∫—É–ø–æ–Ω—ã, –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏
   - **–ò—Å—Ç–µ–∫—à–∏–µ**: `status: 'expired'` - –∫—É–ø–æ–Ω—ã —Å –∏—Å—Ç–µ–∫—à–µ–π –¥–∞—Ç–æ–π
   - **–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ**: `status: 'revoked'` - –∫—É–ø–æ–Ω—ã, –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –∫—É–ø–æ–Ω—ã
   - –ö—É–ø–æ–Ω 4: "–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω" —Å `status: 'expired'`
   - –ö—É–ø–æ–Ω 5: "–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω" —Å `status: 'revoked'`
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤**
   - **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ**: –æ–≤–µ—Ä–ª–µ–π "–ò–°–ü–û–õ–¨–ó–û–í–ê–ù" —Å –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–º –ø–æ–≤–æ—Ä–æ—Ç–æ–º
   - **–ò—Å—Ç–µ–∫—à–∏–µ**: –æ–≤–µ—Ä–ª–µ–π "–ò–°–¢–Å–ö" —Å –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–º –ø–æ–≤–æ—Ä–æ—Ç–æ–º
   - **–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ**: –æ–≤–µ—Ä–ª–µ–π "–û–¢–û–ó–í–ê–ù" —Å –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–º –ø–æ–≤–æ—Ä–æ—Ç–æ–º
   - **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: —Ä–∞–∑–º–µ—Ä—ã –æ–≤–µ—Ä–ª–µ–µ–≤ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞ (wallet.js)**

```javascript
// Global function for coupon usage (same as other pages)
window.useCoupon = async function(couponId) {
    console.log('Use coupon from wallet:', couponId);
    
    try {
        // First, get the coupon data before using it
        const couponResponse = await fetch('/api/coupons/active/1');
        const couponResult = await couponResponse.json();
        const activeCoupons = Array.isArray(couponResult) ? couponResult : (couponResult.data || []);
        
        const coupon = activeCoupons.find(c => c.id === couponId);
        if (!coupon) {
            alert('–ö—É–ø–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω');
            return;
        }
        
        console.log('Coupon found:', coupon.name);
        
        // Store coupon in sessionStorage for checkout page
        sessionStorage.setItem('selectedCoupon', JSON.stringify(coupon));
        console.log('Coupon stored in sessionStorage for checkout');
        
        // Navigate based on coupon type using original coupon data
        if (coupon.project_name === '–õ—é–±–æ–π' || coupon.project_name === '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã') {
            // General coupon - go to invest page
            window.location.href = '/invest.html';
        } else {
            // Specific project coupon - go to packages page
            const projectUrl = getProjectUrl(coupon.project_name);
            console.log('Redirecting to:', projectUrl);
            window.location.href = projectUrl;
        }
    } catch (error) {
        console.error('Error using coupon:', error);
        alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫—É–ø–æ–Ω–∞');
    }
};
```

### **2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞ (checkout.js)**

```javascript
// Initialize coupon package component
async function initializeCouponPackage(package) {
    console.log('Initializing coupon package component...');
    
    const couponsListElement = document.getElementById('coupons-list');
    if (!couponsListElement) {
        console.warn('Coupons list element not found');
        return;
    }
    
    try {
        // Check if there's a selected coupon from sessionStorage
        const selectedCoupon = sessionStorage.getItem('selectedCoupon');
        if (selectedCoupon) {
            console.log('Selected coupon found in sessionStorage:', selectedCoupon);
            const coupon = JSON.parse(selectedCoupon);
            
            // Check if the selected coupon is relevant to this project
            if (coupon.project_name === package.project || coupon.project_name === '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã') {
                console.log('Selected coupon is relevant, rendering it');
                renderCouponsList([coupon]);
                
                // Clear sessionStorage after using
                sessionStorage.removeItem('selectedCoupon');
                return;
            } else {
                console.log('Selected coupon is not relevant to this project');
                // Clear sessionStorage if coupon is not relevant
                sessionStorage.removeItem('selectedCoupon');
            }
        }
        
        // Load available coupons for this project
        const response = await fetch('/api/coupons/active/1');
        const result = await response.json();
        
        // Handle both direct array and object with data property
        const coupons = Array.isArray(result) ? result : (result.data || []);
        
        console.log('Available coupons:', coupons);
        
        // Filter coupons for this project or general coupons and sort by expiry date
        const relevantCoupons = coupons
            .filter(coupon => 
                coupon.project_name === package.project || 
                coupon.project_name === '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã'
            )
            .sort((a, b) => new Date(a.expires_at) - new Date(b.expires_at));
        
        console.log('Relevant coupons for', package.project, ':', relevantCoupons);
        
        if (relevantCoupons.length > 0) {
            // Render all relevant coupons
            renderCouponsList(relevantCoupons);
            console.log('Coupons rendered:', relevantCoupons.length);
        } else {
            console.log('No relevant coupons found for project:', package.project);
            // Hide coupon section if no coupons available
            const couponSection = document.querySelector('.coupon-section');
            if (couponSection) {
                couponSection.style.display = 'none';
            }
        }
        
    } catch (error) {
        console.error('Error loading coupons:', error);
        // Hide coupon section on error
        const couponSection = document.querySelector('.coupon-section');
        if (couponSection) {
            couponSection.style.display = 'none';
        }
    }
}
```

### **3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫—É–ø–æ–Ω–æ–≤ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ (checkout.js)**

```javascript
// Use active coupons (mark them as used)
async function useActiveCoupons() {
    const activeCoupons = document.querySelectorAll('coupon-package[data-active="true"]');
    
    for (const component of activeCoupons) {
        const couponData = JSON.parse(component.getAttribute('coupon-data'));
        
        try {
            const response = await fetch('/api/coupons/use', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    couponId: couponData.id,
                    userId: 1
                })
            });
            
            if (response.ok) {
                console.log('‚úÖ Coupon used successfully:', couponData.name);
            } else {
                console.error('‚ùå Failed to use coupon:', couponData.name);
            }
        } catch (error) {
            console.error('‚ùå Error using coupon:', error);
        }
    }
}

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π –∫—É–ø–æ–Ω
couponsList.querySelectorAll('coupon-package').forEach(component => {
    component.addEventListener('coupon-toggle', function(e) {
        const couponId = e.detail.coupon.id;
        const isActive = e.detail.active;
        
        // –ï—Å–ª–∏ —ç—Ç–æ—Ç –∫—É–ø–æ–Ω –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è, –æ—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ
        if (isActive) {
            couponsList.querySelectorAll('coupon-package').forEach(otherComponent => {
                if (otherComponent !== this) {
                    otherComponent.setActive(false);
                    otherComponent.setAttribute('data-active', 'false');
                }
            });
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
        this.setAttribute('data-active', isActive);
        
        // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â—É—é —Å—É–º–º—É
        updateTotalWithCoupons();
    });
});
```

### **4. –õ–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—É–ø–æ–Ω–∞ (localStorage-api.js)**

```javascript
async useCoupon(couponId, userId) {
    try {
        const coupon = this.data.coupons.find(c => c.id === couponId);
        
        if (!coupon) {
            return { status: 404, data: { error: 'Coupon not found' } };
        }
        
        if (coupon.used) {
            return { status: 400, data: { error: 'Coupon already used' } };
        }
        
        // Mark original coupon as used
        coupon.used = true;
        coupon.updated_at = new Date().toISOString();
        
        // Add COPY to used coupons with used flag
        const usedCoupon = {
            ...coupon, // Copy all original properties
            used: true,
            used_at: new Date().toISOString(),
            updated_at: new Date().toISOString(),
            status: 'used',
            user_id: userId
        };
        
        this.data.used_coupons.push(usedCoupon);
        this.saveData();
        
        return {
            status: 200,
            data: {
                success: true,
                message: '–ö—É–ø–æ–Ω —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω'
            }
        };
    } catch (error) {
        return { status: 500, data: { error: error.message } };
    }
}
```

### **5. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (project-selection-modal.js)**

```javascript
class ProjectSelectionModal extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({ mode: 'open' });
        this.coupon = null;
        this.isVisible = false;
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    setVisible(visible) {
        this.isVisible = visible;
        this.render();
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫—É–ø–æ–Ω–∞
    setCouponData(coupon) {
        this.coupon = coupon;
        this.render();
    }

    // –í—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
    selectProject(projectName) {
        if (this.coupon) {
            // Store coupon in sessionStorage for checkout page
            sessionStorage.setItem('selectedCoupon', JSON.stringify(this.coupon));
            
            // Navigate to packages page for the selected project
            const projectUrl = this.getProjectUrl(projectName);
            window.location.href = projectUrl;
        }
    }

    // –ü–æ–ª—É—á–∏—Ç—å URL –ø—Ä–æ–µ–∫—Ç–∞
    getProjectUrl(projectName) {
        const projectUrls = {
            '–î–∏—Ä–∏–∂–∞–±–ª–∏': '/packages.html?project=airship',
            '–°–æ–≤—ç–ª–º–∞—à': '/packages.html?project=sovelmash'
        };
        return projectUrls[projectName] || '/packages.html';
    }
}

customElements.define('project-selection-modal', ProjectSelectionModal);
```

### **6. –õ–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (wallet.js, coupons.js)**

```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫—É–ø–æ–Ω–æ–≤ "–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã"
document.addEventListener('coupon-use-all-projects', function(e) {
    e.stopPropagation();
    const coupon = e.detail.coupon;
    console.log('All-projects coupon clicked:', coupon);
    
    // Show project selection modal
    showProjectSelectionModal(coupon);
});

// –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
function showProjectSelectionModal(coupon) {
    // Create modal element if it doesn't exist
    let modal = document.querySelector('project-selection-modal');
    if (!modal) {
        modal = document.createElement('project-selection-modal');
        document.body.appendChild(modal);
    }
    
    // Set coupon data and show modal
    modal.setCouponData(coupon);
    modal.setVisible(true);
    
    // Listen for modal close
    modal.addEventListener('modal-close', function() {
        modal.setVisible(false);
    });
}
```

### **7. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Web Components**

#### **mini-coupon.js –∏ full-coupon-card.js**
```javascript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
button.addEventListener('click', (e) => {
    e.preventDefault();
    
    // Check if coupon is for all projects
    if (this.coupon.project_name === '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã') {
        this.dispatchEvent(new CustomEvent('coupon-use-all-projects', {
            detail: { coupon: this.coupon },
            bubbles: true,
            composed: true
        }));
    } else {
        this.dispatchEvent(new CustomEvent('coupon-use', {
            detail: { coupon: this.coupon },
            bubbles: true,
            composed: true
        }));
    }
});
```

### **8. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∫—É–ø–æ–Ω–æ–≤ (full-coupon-card.js)**

```javascript
// –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∫—É–ø–æ–Ω–∞
getStatusOverlay() {
    if (!this.isHistory) return '';
    
    if (this.coupon.status === 'expired') {
        return '<div class="coupon-used-overlay">–ò–°–¢–Å–ö</div>';
    } else if (this.coupon.status === 'revoked') {
        return '<div class="coupon-used-overlay">–û–¢–û–ó–í–ê–ù</div>';
    } else if (this.coupon.used) {
        return '<div class="coupon-used-overlay">–ò–°–ü–û–õ–¨–ó–û–í–ê–ù</div>';
    }
    
    return '';
}

// CSS —Å—Ç–∏–ª–∏ –¥–ª—è –æ–≤–µ—Ä–ª–µ–µ–≤
const overlayStyles = `
    .coupon-used-overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-15deg);
        font-size: 2.5rem;
        font-weight: 700;
        color: #9ca3af;
        border: 3px solid #d1d5db;
        border-radius: 8px;
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.8);
        pointer-events: none;
        z-index: 10;
    }
    
    @media (max-width: 768px) {
        .coupon-used-overlay {
            font-size: 1.5rem;
            padding: 4px 8px;
            border-width: 2px;
        }
    }
    
    @media (max-width: 480px) {
        .coupon-used-overlay {
            font-size: 1.2rem;
            padding: 3px 6px;
            border-width: 1px;
        }
    }
    
    @media (max-width: 360px) {
        .coupon-used-overlay {
            font-size: 1rem;
            padding: 2px 4px;
            border-width: 1px;
        }
    }
`;
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### **–ö—É–ø–æ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**

```javascript
const coupon = {
    id: 1,
    code: 'WELCOME25',
    name: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
    description: '–°–∫–∏–¥–∫–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
    discount: 25,
    discount_amount: 25,
    discount_type: 'fixed', // 'fixed' –∏–ª–∏ 'percentage'
    project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã', // –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
    expires_at: '2025-12-31T23:59:59.000Z',
    conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $250',
    used: false,
    status: undefined, // 'expired', 'revoked', –∏–ª–∏ undefined
    created_at: '2025-01-01T00:00:00.000Z',
    updated_at: '2025-01-01T00:00:00.000Z'
};
```

### **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏**

#### **–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω**
```javascript
const expiredCoupon = {
    id: 4,
    code: 'EXPIRED30',
    name: '–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω',
    description: '–ö—É–ø–æ–Ω —Å –∏—Å—Ç–µ–∫—à–µ–π –¥–∞—Ç–æ–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è',
    discount: 30,
    discount_amount: 30,
    project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
    expires_at: '2024-12-31T23:59:59.000Z', // –ü—Ä–æ—à–ª–∞—è –¥–∞—Ç–∞
    conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $100',
    used: false,
    status: 'expired', // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
    created_at: '2024-01-01T00:00:00.000Z',
    updated_at: '2024-12-31T23:59:59.000Z'
};
```

#### **–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω**
```javascript
const revokedCoupon = {
    id: 5,
    code: 'REVOKED15',
    name: '–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω',
    description: '–ö—É–ø–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π',
    discount: 15,
    discount_amount: 15,
    project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
    expires_at: '2025-06-30T23:59:59.000Z',
    conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $200',
    used: false,
    status: 'revoked', // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
    created_at: '2024-06-01T00:00:00.000Z',
    updated_at: '2025-01-01T00:00:00.000Z'
};
```

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω**

```javascript
// –ö–æ–ø–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
const usedCoupon = {
    ...coupon, // –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞
    used: true, // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π
    used_at: new Date().toISOString(), // –í—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    updated_at: new Date().toISOString(), // –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    status: 'used', // –°—Ç–∞—Ç—É—Å –¥–ª—è API
    user_id: userId // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
};
```

## üîÑ API Endpoints

### **–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤**
```
GET /api/coupons/active/:userId
```

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—É–ø–æ–Ω–∞**
```
POST /api/coupons/use
Body: {
    couponId: number,
    userId: number
}
```

### **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∫—É–ø–æ–Ω–æ–≤**
```
GET /api/coupons/history/:userId
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∫—É–ø–æ–Ω—ã –∏–∑ used_coupons:
// - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∫—É–ø–æ–Ω—ã (used: true)
// - –ò—Å—Ç–µ–∫—à–∏–µ –∫—É–ø–æ–Ω—ã (status: 'expired')
// - –û—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ –∫—É–ø–æ–Ω—ã (status: 'revoked')
```

### **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤**
```javascript
// –í localStorage-api.js
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –∫—É–ø–æ–Ω—ã –≤ –∏—Å—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –∏—Ö —Ç–∞–º –Ω–µ—Ç
if (!this.data.used_coupons) {
    this.data.used_coupons = [];
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –Ω–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã
const hasExpiredCoupon = this.data.used_coupons.some(c => c.id === 4);
const hasRevokedCoupon = this.data.used_coupons.some(c => c.id === 5);

// –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
if (!hasExpiredCoupon) {
    this.data.used_coupons.push({
        id: 4,
        code: 'EXPIRED30',
        name: '–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω',
        description: '–ö—É–ø–æ–Ω —Å –∏—Å—Ç–µ–∫—à–µ–π –¥–∞—Ç–æ–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è',
        discount: 30,
        discount_amount: 30,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
        expires_at: '2024-12-31T23:59:59.000Z',
        conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $100',
        used: false,
        status: 'expired',
        created_at: '2024-01-01T00:00:00.000Z',
        updated_at: '2024-12-31T23:59:59.000Z'
    });
}

if (!hasRevokedCoupon) {
    this.data.used_coupons.push({
        id: 5,
        code: 'REVOKED15',
        name: '–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω',
        description: '–ö—É–ø–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π',
        discount: 15,
        discount_amount: 15,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
        expires_at: '2025-06-30T23:59:59.000Z',
        conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $200',
        used: false,
        status: 'revoked',
        created_at: '2024-06-01T00:00:00.000Z',
        updated_at: '2025-01-01T00:00:00.000Z'
    });
}
```

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ API –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ ID –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage**: –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏**: –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã –≤–∏–¥–Ω—ã –≤–æ –≤–∫–ª–∞–¥–∫–µ "–ò—Å—Ç–æ—Ä–∏—è"
- **–°—Ç–∞—Ç—É—Å—ã**: `expired` –∏ `revoked` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫—É–ø–æ–Ω–æ–≤

## üì± Web Components

### **mini-coupon**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –∫–æ—à–µ–ª–µ–∫, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–∞–∫–µ—Ç–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏**: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- **–ö–Ω–æ–ø–∫–∞**: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
- **–°—Ç–∞—Ç—É—Å—ã**: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω", "–ò—Å—Ç—ë–∫", "–û—Ç–æ–∑–≤–∞–Ω"
- **–û–≤–µ—Ä–ª–µ–∏**: –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ —à—Ç–∞–º–ø—ã —Å —Ç–µ–∫—Å—Ç–æ–º —Å—Ç–∞—Ç—É—Å–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: —Ä–∞–∑–º–µ—Ä—ã –æ–≤–µ—Ä–ª–µ–µ–≤ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### **coupon-package**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–∞
- **–§—É–Ω–∫—Ü–∏–∏**: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ, —Ä–∞—Å—á–µ—Ç —Å–∫–∏–¥–∫–∏
- **–≠–ª–µ–º–µ–Ω—Ç**: –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å

### **full-coupon-card**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É–ø–æ–Ω–æ–≤
- **–§—É–Ω–∫—Ü–∏–∏**: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤
- **–ö–Ω–æ–ø–∫–∞**: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
- **–°—Ç–∞—Ç—É—Å—ã**: "–ò–°–ü–û–õ–¨–ó–û–í–ê–ù", "–ò–°–¢–Å–ö", "–û–¢–û–ó–í–ê–ù"
- **–û–≤–µ—Ä–ª–µ–∏**: –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ —à—Ç–∞–º–ø—ã —Å —Ç–µ–∫—Å—Ç–æ–º —Å—Ç–∞—Ç—É—Å–∞
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: —Ä–∞–∑–º–µ—Ä—ã –æ–≤–µ—Ä–ª–µ–µ–≤ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–õ–æ–≥–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤**: `getStatusOverlay()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ–≤–µ—Ä–ª–µ—è
- **CSS**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–°–æ–±—ã—Ç–∏—è**: `coupon-use` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, `coupon-use-all-projects` –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö

### **project-selection-modal**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∫—É–ø–æ–Ω–æ–≤ "–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã"
- **–§—É–Ω–∫—Ü–∏–∏**: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤, –≤—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **–ü—Ä–æ–µ–∫—Ç—ã**: –î–∏—Ä–∏–∂–∞–±–ª–∏ üöÅ, –°–æ–≤—ç–ª–º–∞—à üè≠
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–ê–Ω–∏–º–∞—Ü–∏—è**: –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **–°–æ–±—ã—Ç–∏—è**: `modal-close` –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

## üé® UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –∫—É–ø–æ–Ω–æ–≤**
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: –≤–∫–ª—é—á–µ–Ω/–≤—ã–∫–ª—é—á–µ–Ω
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∏ —Å—Ç–∏–ª—è
- **–†–∞—Å—á–µ—Ç —Å–∫–∏–¥–∫–∏**: –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã**
- **–ò—Å—Ö–æ–¥–Ω–∞—è —Ü–µ–Ω–∞**: —Ü–µ–Ω–∞ –ø–∞–∫–µ—Ç–∞
- **–°–∫–∏–¥–∫–∞**: —Å—É–º–º–∞ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤
- **–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞**: –∏—Å—Ö–æ–¥–Ω–∞—è —Ü–µ–Ω–∞ - —Å–∫–∏–¥–∫–∞

### **–í–∞–ª–∏–¥–∞—Ü–∏—è**
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞**: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ø–æ–Ω–æ–≤**: –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∫—É–ø–æ–Ω–æ–≤**
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∫—É–ø–æ–Ω—ã**: –±–µ–∑ –æ–≤–µ—Ä–ª–µ—è, –∫–Ω–æ–ø–∫–∞ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∫—É–ø–æ–Ω—ã**: –æ–≤–µ—Ä–ª–µ–π "–ò–°–ü–û–õ–¨–ó–û–í–ê–ù", –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
- **–ò—Å—Ç–µ–∫—à–∏–µ –∫—É–ø–æ–Ω—ã**: –æ–≤–µ—Ä–ª–µ–π "–ò–°–¢–Å–ö", –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
- **–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ –∫—É–ø–æ–Ω—ã**: –æ–≤–µ—Ä–ª–µ–π "–û–¢–û–ó–í–ê–ù", –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞

### **–î–∏–∑–∞–π–Ω –æ–≤–µ—Ä–ª–µ–µ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤**
- **–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø–æ —Ü–µ–Ω—Ç—Ä—É –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –ø–æ–≤–æ—Ä–æ—Ç–æ–º -15¬∞
- **–°—Ç–∏–ª—å**: —Å–µ—Ä—ã–π —Ç–µ–∫—Å—Ç —Å —Ä–∞–º–∫–æ–π, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
- **–†–∞–∑–º–µ—Ä—ã**: 2.5rem –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ, 1.5rem –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ, 1.2rem –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: `pointer-events: none` - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–ª–∏–∫–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: —Ä–∞–∑–º–µ—Ä—ã –∏ –æ—Ç—Å—Ç—É–ø—ã —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –Ω–∞ –º–µ–Ω—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: `z-index: 10` - –≤—Å–µ–≥–¥–∞ –ø–æ–≤–µ—Ä—Ö –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–ü–æ–≤–æ—Ä–æ—Ç**: `transform: rotate(-15deg)` –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ —à—Ç–∞–º–ø–∞
- **–§–æ–Ω**: `rgba(255, 255, 255, 0.8)` –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

### **–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞**
```javascript
// –í full-coupon-card.js
getStatusOverlay() {
    if (!this.isHistory) return '';
    
    if (this.coupon.status === 'expired') {
        return '<div class="coupon-used-overlay">–ò–°–¢–Å–ö</div>';
    } else if (this.coupon.status === 'revoked') {
        return '<div class="coupon-used-overlay">–û–¢–û–ó–í–ê–ù</div>';
    } else if (this.coupon.used) {
        return '<div class="coupon-used-overlay">–ò–°–ü–û–õ–¨–ó–û–í–ê–ù</div>';
    }
    
    return '';
}
```

### **–°—Ç–∏–ª–∏ –æ–≤–µ—Ä–ª–µ–µ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤**
```css
.coupon-used-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-15deg);
    font-size: 2.5rem;
    font-weight: 700;
    color: #9ca3af;
    border: 3px solid #d1d5db;
    border-radius: 8px;
    padding: 8px 16px;
    background: rgba(255, 255, 255, 0.8);
    pointer-events: none;
    z-index: 10;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
@media (max-width: 768px) {
    .coupon-used-overlay {
        font-size: 1.5rem;
        padding: 4px 8px;
        border-width: 2px;
    }
}

@media (max-width: 480px) {
    .coupon-used-overlay {
        font-size: 1.2rem;
        padding: 3px 6px;
        border-width: 1px;
    }
}

@media (max-width: 360px) {
    .coupon-used-overlay {
        font-size: 1rem;
        padding: 2px 4px;
        border-width: 1px;
    }
}
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**
```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
python3 -m http.server 8002

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
open "http://localhost:8002/wallet.html"
open "http://localhost:8002/checkout.html?package=sov-500"
```

### **Vercel**
```bash
# –î–µ–ø–ª–æ–π –Ω–∞ Vercel
vercel --prod

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
https://your-app.vercel.app/wallet.html
https://your-app.vercel.app/checkout.html?package=sov-500
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **localStorage**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **sessionStorage**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É–ø–æ–Ω–∞ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ API
4. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
5. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∫—É–ø–æ–Ω–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
6. **‚ö†Ô∏è –í–∞–∂–Ω–æ**: –ö—É–ø–æ–Ω—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞, –∞ –Ω–µ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
7. **üîÑ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫—É–ø–æ–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –∫–æ–ø–∏—è –≤ `used_coupons` —Å —Ñ–ª–∞–≥–æ–º `used: true`
8. **üé´ –°—Ç–∞—Ç—É—Å—ã**: –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 3 —Ç–∏–ø–∞ —Å—Ç–∞—Ç—É—Å–æ–≤: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ, –∏—Å—Ç–µ–∫—à–∏–µ, –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã–µ
9. **üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
10. **üé® –û–≤–µ—Ä–ª–µ–∏**: –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ —à—Ç–∞–º–ø—ã —Å —Ç–µ–∫—Å—Ç–æ–º —Å—Ç–∞—Ç—É—Å–∞, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
11. **üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –û–≤–µ—Ä–ª–µ–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∫–ª–∏–∫–∏ (`pointer-events: none`)
12. **üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**: –†–∞–∑–º–µ—Ä—ã –æ–≤–µ—Ä–ª–µ–µ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–º–µ–Ω—å—à–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
13. **üé® –î–∏–∑–∞–π–Ω**: –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ —à—Ç–∞–º–ø—ã —Å –ø–æ–≤–æ—Ä–æ—Ç–æ–º -15¬∞ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏
14. **üé´ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –û–î–ò–ù –∫—É–ø–æ–Ω - –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
15. **ü™ü –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ**: –î–ª—è –∫—É–ø–æ–Ω–æ–≤ "–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –¥–≤—É–º—è –æ–ø—Ü–∏—è–º–∏
16. **üéØ –í—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –º–µ–∂–¥—É –î–∏—Ä–∏–∂–∞–±–ª—è–º–∏ –∏ –°–æ–≤—ç–ª–º–∞—à–µ–º –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–∞–∫–µ—Ç–æ–≤
17. **üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏

## üé´ –¢–µ—Å—Ç–æ–≤—ã–µ –∫—É–ø–æ–Ω—ã

### **–ê–∫—Ç–∏–≤–Ω—ã–µ –∫—É–ø–æ–Ω—ã**
```javascript
const activeCoupons = [
    {
        id: 1,
        code: 'WELCOME25',
        name: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
        discount_amount: 25,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã'
    },
    {
        id: 2,
        code: 'INVEST50',
        name: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π –±–æ–Ω—É—Å',
        discount_amount: 50,
        project_name: '–î–∏—Ä–∏–∂–∞–±–ª–∏'
    },
    {
        id: 3,
        code: 'SOVELMASH20',
        name: '–°–æ–≤—ç–ª–º–∞—à –±–æ–Ω—É—Å',
        discount_amount: 20,
        project_name: '–°–æ–≤—ç–ª–º–∞—à'
    }
];
```

### **–ö—É–ø–æ–Ω—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏**
```javascript
const historyCoupons = [
    {
        id: 4,
        code: 'EXPIRED30',
        name: '–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω',
        discount_amount: 30,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
        status: 'expired',
        expires_at: '2024-12-31T23:59:59.000Z' // –ü—Ä–æ—à–ª–∞—è –¥–∞—Ç–∞
    },
    {
        id: 5,
        code: 'REVOKED15',
        name: '–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω',
        discount_amount: 15,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
        status: 'revoked',
        expires_at: '2025-06-30T23:59:59.000Z' // –ë—É–¥—É—â–∞—è –¥–∞—Ç–∞
    }
];
```

### **–õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤**
```javascript
// –í localStorage-api.js
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –Ω–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—É–ø–æ–Ω—ã
const hasExpiredCoupon = this.data.used_coupons.some(c => c.id === 4);
const hasRevokedCoupon = this.data.used_coupons.some(c => c.id === 5);

// –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
if (!hasExpiredCoupon) {
    this.data.used_coupons.push({
        id: 4,
        code: 'EXPIRED30',
        name: '–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω',
        description: '–ö—É–ø–æ–Ω —Å –∏—Å—Ç–µ–∫—à–µ–π –¥–∞—Ç–æ–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è',
        discount: 30,
        discount_amount: 30,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
        expires_at: '2024-12-31T23:59:59.000Z',
        conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $100',
        used: false,
        status: 'expired',
        created_at: '2024-01-01T00:00:00.000Z',
        updated_at: '2024-12-31T23:59:59.000Z'
    });
}

if (!hasRevokedCoupon) {
    this.data.used_coupons.push({
        id: 5,
        code: 'REVOKED15',
        name: '–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω',
        description: '–ö—É–ø–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –æ—Ç–æ–∑–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π',
        discount: 15,
        discount_amount: 15,
        project_name: '–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã',
        expires_at: '2025-06-30T23:59:59.000Z',
        conditions: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ $200',
        used: false,
        status: 'revoked',
        created_at: '2024-06-01T00:00:00.000Z',
        updated_at: '2025-01-01T00:00:00.000Z'
    });
}
```

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫—É–ø–æ–Ω–æ–≤**
- **–ò—Å—Ç–µ–∫—à–∏–π –∫—É–ø–æ–Ω**: `expires_at` –≤ –ø—Ä–æ—à–ª–æ–º, `status: 'expired'`
- **–û—Ç–æ–∑–≤–∞–Ω–Ω—ã–π –∫—É–ø–æ–Ω**: `expires_at` –≤ –±—É–¥—É—â–µ–º, `status: 'revoked'`
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ**: —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ ID –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ —à—Ç–∞–º–ø—ã —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ç–µ–∫—Å—Ç–æ–º
